# Banana Store

> í”„ë¡œì íŠ¸ íšŒê³ ë¬¸ì„œ : https://dolphin-pc.notion.site/14a2ffc42d5d492da5cdb5b5c44fdc1e?v=1089870838e380b1861b000cc6e8857f&pvs=4

> í”„ë¡œì íŠ¸ Issues : https://github.com/Dolphin-PC/Commerce/issues?q=is%3Aissue+is%3Aclosed

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

- **ìƒí’ˆ ê²°ì œ**ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ E-Commerce í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

### âš™ï¸ ì‚¬ìš©ê¸°ìˆ 

<img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=black">
<img src="https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=Vite&logoColor=white">
<img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=TypeScript&logoColor=white">
<br/>
<img src="https://img.shields.io/badge/Supabase-181818?style=for-the-badge&logo=supabase&logoColor=white"><small>Typescript/ê´€ê³„í˜• DBì˜ ì§€ì›ì´ ìˆì–´ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</small>
<br/>
<img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=purple">
<img src="https://img.shields.io/badge/ReactQuery-FF4154?style=for-the-badge&logo=ReactQuery&logoColor=white">
<img src="https://img.shields.io/badge/Zustand-F3DF49?style=for-the-badge&logo=zustand&logoColor=white">
<br/>
<img src="https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white">
<img src="https://img.shields.io/badge/Shadcn_UI-38B2A?style=for-the-badge&logo=&logoColor=white"><small>ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¢…ì†ë˜ì§€ ì•Šê³ , Copy&Pasteë°©ì‹ìœ¼ë¡œ ì»¤ìŠ¤í…€ì´ ìš©ì´í•˜ì—¬ ì„ íƒí–ˆìŠµë‹ˆë‹¤.</small>
<br/>
<img src="https://img.shields.io/badge/ReactHookForm-EC5990?style=for-the-badge&logo=ReactHookForm&logoColor=white">
<img src="https://img.shields.io/badge/Zod-333?style=for-the-badge&logo=&logoColor=white"><small>TSíƒ€ì…ì˜ ì•ˆì •ì„±ê³¼ ìœ íš¨ì„±ê²€ì¦ê³¼ì •ì— ìˆì–´ Yupë³´ë‹¤ ë” ì í•©í•˜ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤. </small>
<br/>
<img src="https://img.shields.io/badge/testing%20library-323330?style=for-the-badge&logo=testing-library&logoColor=red">
<img src="https://img.shields.io/badge/Vitest-646CFF?style=for-the-badge&logo=Vite&logoColor=white"><small>jestë³´ë‹¤ í…ŒìŠ¤íŠ¸ì„¤ì • ì‘ì—…ì´ ê°„ë‹¨í•˜ì—¬ ì„ íƒí–ˆìŠµë‹ˆë‹¤.</small>
<br/>
<img src="https://img.shields.io/badge/Cypress-32333?style=for-the-badge&logo=&logoColor=red"><small>E2Eí…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë„ì…í–ˆìŠµë‹ˆë‹¤.</small>

### ğŸ”¨ ì•„í‚¤í…ì²˜

#### Database

- í¬ê²Œ `user`, `product`, `order`, `pay_history` ê°€ ìˆìŠµë‹ˆë‹¤.
  ![DB](./docs/DB.png)

#### FE Folderêµ¬ì¡°

- FSDë¥¼ ê¸°ë°˜ìœ¼ë¡œ `app > widgets > pages > features > shared` ìˆœìœ¼ë¡œ ì°¸ì´ˆí•  ìˆ˜ ìˆëŠ” ê³„ì¸µì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.
  (ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ì€ ì°¸ì¡°ê°€ëŠ¥í•˜ë‚˜, ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ì€ ì°¸ì¡°ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤.)

  - **app** : ì–´ë””ì—ë„ ì¬ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì£¼ë¡œ ì•± ì„¤ì •ê³¼ ê´€ë ¨ëœ íŒŒì¼ì…ë‹ˆë‹¤. (ex. Router)
  - **widgets** : íŠ¹ì • featureê¸°ëŠ¥ë“¤ì˜ ì¡°í•©ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ componentsê°€ ìœ„ì¹˜í•©ë‹ˆë‹¤. (Header)
  - **pages** : í™”ë©´ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
  - **features** : ë„ë©”ì¸ ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. (@ê°€ ë¶™ì€ í´ë”ëŠ” DBì™€ ê´€ë ¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
  - **shared** : ì–´ë””ì—ë„ ì¢…ì†ë˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ, ì¬ì‚¬ìš©ì„±ì´ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤.

  <details>
  <summary>í´ë”êµ¬ì¡° í¼ì¹˜ê¸°</summary>

  ```
  ğŸ“¦src
  â”£ ğŸ“‚app
  â”ƒ â”£ ğŸ“‚Common
  â”ƒ â”£ ğŸ“‚providers
  â”ƒ â”£ ğŸ“‚routers
  â”ƒ â”£ ğŸ“œApp.tsx
  â”ƒ â”£ ğŸ“œindex.css
  â”ƒ â”— ğŸ“œmain.tsx
  â”£ ğŸ“‚features
  â”ƒ â”£ ğŸ“‚@auth
  â”ƒ â”£ ğŸ“‚@portOne
  â”ƒ â”£ ğŸ“‚@storage
  â”ƒ â”£ ğŸ“‚cart
  â”ƒ â”£ ğŸ“‚category
  â”ƒ â”£ ğŸ“‚order
  â”ƒ â”£ ğŸ“‚order_detail
  â”ƒ â”£ ğŸ“‚pay_history
  â”ƒ â”£ ğŸ“‚product
  â”ƒ â”£ ğŸ“‚product_image
  â”ƒ â”£ ğŸ“‚refund_history
  â”ƒ â”— ğŸ“‚user
  â”£ ğŸ“‚pages
  â”ƒ â”£ ğŸ“‚CartPage
  â”ƒ â”£ ğŸ“‚DashBoardPage
  â”ƒ â”£ ğŸ“‚DashboardOrderDetailPage
  â”ƒ â”£ ğŸ“‚DashboardOrderPage
  â”ƒ â”£ ğŸ“‚DashboardProductDetailPage
  â”ƒ â”£ ğŸ“‚DashboardProductEditPage
  â”ƒ â”£ ğŸ“‚DashboardProductNewPage
  â”ƒ â”£ ğŸ“‚DashboardProductPage
  â”ƒ â”£ ğŸ“‚HomePage
  â”ƒ â”£ ğŸ“‚MyOrderDetailPage
  â”ƒ â”£ ğŸ“‚MyOrderPage
  â”ƒ â”£ ğŸ“‚MyPage
  â”ƒ â”£ ğŸ“‚OrderPage
  â”ƒ â”£ ğŸ“‚OrderRedirectPage
  â”ƒ â”£ ğŸ“‚ProductDetailPage
  â”ƒ â”£ ğŸ“‚ProductPage
  â”ƒ â”£ ğŸ“‚SignInPage
  â”ƒ â”£ ğŸ“‚SignupOAuthPage
  â”ƒ â”£ ğŸ“‚SignupPage
  â”ƒ â”— ğŸ“œHelmets.tsx
  â”£ ğŸ“‚shared
  â”ƒ â”£ ğŸ“‚assets
  â”ƒ â”£ ğŸ“‚components
  â”ƒ â”£ ğŸ“‚config
  â”ƒ â”£ ğŸ“‚consts
  â”ƒ â”£ ğŸ“‚hooks
  â”ƒ â”£ ğŸ“‚lib
  â”ƒ â”— ğŸ“‚types
  â”£ ğŸ“‚widgets
  ```

    </details>

## ğŸ¯ ì„œë¹„ìŠ¤ ê¸°ëŠ¥

> ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- íšŒì›ê°€ì…/ë¡œê·¸ì¸(Supabase Auth)
- ì¼ë°˜ ì‚¬ìš©ì
  1. ìƒí’ˆêµ¬ë§¤ (ì•„ì„í¬íŠ¸ ì—°ë™)
  2. ì¥ë°”êµ¬ë‹ˆ
  3. ìƒí’ˆ í•„í„°ê¸°ëŠ¥ (ê²€ìƒ‰ì–´, íƒœê·¸, ê°€ê²©ë²”ìœ„)
  4. êµ¬ë§¤ë‚´ì—­ ì¡°íšŒ
- íŒë§¤ì
  1. íŒë§¤ìƒí’ˆ ë“±ë¡
  2. ì£¼ë¬¸ë‚´ì—­ ì¡°íšŒ

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥ ì†Œê°œ

> âœ… í•µì‹¬ê¸°ëŠ¥
> ğŸ’¥ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
> âš™ï¸ ì„±ëŠ¥ìµœì í™”

### âœ…ğŸ’¥ 1. ì•„ì„í¬íŠ¸ ê²°ì œ ê¸°ëŠ¥

- ì•„ì„í¬íŠ¸ SDKë¥¼ í™œìš©í•´ ê°€ìƒê²°ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```mermaid
sequenceDiagram
    actor User
    participant ìƒí’ˆìƒì„¸í˜ì´ì§€
    participant Order/OrderDetail
    participant Product
    participant Iamport
    participant PayHistory

    User->>ìƒí’ˆìƒì„¸í˜ì´ì§€: êµ¬ë§¤ë²„íŠ¼ í´ë¦­
		ìƒí’ˆìƒì„¸í˜ì´ì§€-->>Order/OrderDetail: ìƒì„±
    Order/OrderDetail-->>Product: ì¬ê³ ìˆ˜ëŸ‰ ìš°ì„ ê°ì†Œ
    Iamport->>User: ê²°ì œì°½ ë¶ˆëŸ¬ì˜¤ê¸°
    alt ê²°ì œ ì·¨ì†Œ
        Iamport-->>Product: ì¬ê³ ìˆ˜ëŸ‰ ì›ìƒë³µêµ¬
        Product-->>Order/OrderDetail: ì£¼ë¬¸ ì‚­ì œ
    else ê²°ì œ ì™„ë£Œ
        Iamport->>User: ê²°ì œì™„ë£Œ í™”ë©´ Redirect
        User-->>Iamport: paymentIdë¡œ ê²°ì œì¡°íšŒAPI ìš”ì²­
        Iamport-->>PayHistory: ê²°ì œë‚´ì—­ ì¶”ê°€
        PayHistory-->>Order/OrderDetail: ì£¼ë¬¸ìƒíƒœ ì—…ë°ì´íŠ¸(ê²°ì œì™„ë£Œ í™•ì¸)
    end
```

<img src="./docs/á„‹á…¡á„‹á…µá†·á„‘á…©á„á…³ á„‰á…¡á†¼á„‘á…®á†· á„€á…§á†¯á„Œá…¦.gif"/>

- [ğŸ’¥ ì•„ì„í¬íŠ¸ redirectUrl](https://dolphin-pc.notion.site/redirectUrl-5bb15243d15340ae9710ddf9b95cd734?pvs=4)

### âš™ï¸ 2. ìƒí’ˆ ì´ë¯¸ì§€ ìµœì í™”(Lazy Loading)

- ì‚¬ìš©ìì˜ í™”ë©´ì´ viewport ì˜ì—­ì— ë“¤ì–´ì˜¨ ì´ë¯¸ì§€ë§Œ ë¡œë“œí•˜ì—¬, ì›¹í˜ì´ì§€ ì´ˆê¸° ë¡œë”© ì†ë„ë¥¼ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
- [ğŸ“ ì´ë¯¸ì§€ ìµœì í™” 1. Image Lazy Loading](https://dolphin-pc.notion.site/1-Lazy-Loading-b7f6ffe10c034ef1aa2aa1cbfc255440?pvs=4)
  ![Lazy Loading](https://file.notion.so/f/f/231a861b-88a7-4a1d-bfa3-082686e82101/12f07b05-2c92-4f4f-ac0e-d52c75a1509e/%E1%84%8B%E1%85%B5%E1%84%86%E1%85%B5%E1%84%8C%E1%85%B5_lazy_loading.gif?table=block&id=f6d3b93d-bd78-475c-8a6a-9d8df34f7357&spaceId=231a861b-88a7-4a1d-bfa3-082686e82101&expirationTimestamp=1726977600000&signature=NMZjKkjLc2Tiamq5M1ZmLrEC8tcOqBHZqA_25kCjJYQ)

### ğŸ’¥âš™ï¸ 3. ìƒí’ˆ ì´ë¯¸ì§€ ìµœì í™”(Image Resize & Webp), ì‚¬ì´ì¦ˆ 50%ê°ì†Œ

- ìƒí’ˆ ì´ë¯¸ì§€ê°€ ë§ì€ ì´ì»¤ë¨¸ìŠ¤ ì‚¬ì´íŠ¸ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬, ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆë¥¼ ê°ì†Œí•˜ì—¬ ë¡œë”© ì†ë„ë¥¼ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
- ìƒí’ˆ ëª©ë¡í™”ë©´ì˜ ê²½ìš°, ì´ë¯¸ì§€ thumnailì„ ì ìš©í•´ **ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆë¥¼ 50% ê°ì†Œ**ì‹œì¼°ìŠµë‹ˆë‹¤. (157KB -> 64.3KB)
- [ğŸ“ ì´ë¯¸ì§€ ìµœì í™” 2. Image Resize](https://dolphin-pc.notion.site/2-Image-Resize-1eafb2f29fa5431383f5c51f38c6e506?pvs=4)

<div style="display:flex;">
<img src="https://private-user-images.githubusercontent.com/43159931/363008677-8bd9ab83-013c-4016-920b-6a2ade06e4a9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY4OTEzMDQsIm5iZiI6MTcyNjg5MTAwNCwicGF0aCI6Ii80MzE1OTkzMS8zNjMwMDg2NzctOGJkOWFiODMtMDEzYy00MDE2LTkyMGItNmEyYWRlMDZlNGE5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTIxVDAzNTY0NFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNhNDg2YjU1MWMyYTM3ZjIyODQ0MjUzNDg3YTQwNmI1ZmVlNTlhYmE0MWRmYTBlNTQ2MmNhYTY5YmJkZmNiOWYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.J4GKqWoc3Eh5L89N1mkNCgU_ngpRhNxEMu4Go8u-ND8" style="width:50%">
<img src="https://private-user-images.githubusercontent.com/43159931/363010312-9445a671-9f53-4374-8145-e97251f69aba.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY4OTEzMDQsIm5iZiI6MTcyNjg5MTAwNCwicGF0aCI6Ii80MzE1OTkzMS8zNjMwMTAzMTItOTQ0NWE2NzEtOWY1My00Mzc0LTgxNDUtZTk3MjUxZjY5YWJhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTIxVDAzNTY0NFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNjYTFmNjNjNzY4NGY5MTU0NDI2OWMzYWU0MDMxOTg2OTVmMDcwNjdkYzE2M2QyODFkNWExYmExMDI2YjY3M2ImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.QuIRMFjYu4HM4crKLuv4_4UnAkmDdYnj9FGG6Et4iKU" style="width:50%">
</div>

### ğŸ’¥âš™ï¸ 4. React Windowing, ë Œë”ë§ ì§€ì—° 98%ê°ì†Œ

- ë¬´í•œ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´, ë§ì€ ì»´í¬ë„ŒíŠ¸ê°€ ìŒ“ì´ê²Œ ëœë‹¤ë©´ ë Œë”ë§ì˜ ì§€ì—°ì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.
- ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´, ë·°í¬íŠ¸ì˜ í™”ë©´ ì™¸ ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë”ë§ë˜ì§€ ì•Šë„ë¡ windowingê¸°ë²•ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.
  ![react-window](./docs/react-window.gif)

- 10ë§Œê°œì˜ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸í–ˆì„ ë•Œ, ì´ˆê¸° ë Œë”ë§ ì‹œê°„ì´ `976ms > 16msë¡œ, 98%ê°ì†Œ`ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- [ğŸ“ react-window](https://dolphin-pc.notion.site/react-window-41289d25da9a42c4bab241166d760a6d?pvs=4)

<div style="display:flex;">
<img src="./docs/ì ìš©ì „.png" style="width:50%">
<img src="./docs/ì ìš©í›„.png" style="width:50%">
</div>
